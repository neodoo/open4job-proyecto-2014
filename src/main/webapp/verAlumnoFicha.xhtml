<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>

	<ui:composition template="/template/common/commonLayout.xhtml">

		<ui:define name="content">

			<f:facet name="header">
				<p:outputLabel value="#{etqAlm['titulo.fichaAlumno']}" />
			</f:facet>

			<h:messages style="margin:8px;" />
			<h:form>
			
						<p:toolbar>
					<f:facet name="left">
						<p:commandButton value="#{etqAlm['etiquetas.modificar']}"
							action="#{alumnoBean.modifyAlumformno()}" />
						<p:commandButton value="#{etqAlm['etiquetas.borrar']}"
							action="#{alumnoBean.deleteAlumno()}" />
						<span class="ui-separator"> <span
							class="ui-icon ui-icon-grip-dotted-vertical" />
						</span>

						<p:commandButton value="Mostrar Tutores"
							action="#{verTutorBean.getListaTutor()}" />
						<p:commandButton value="Mostrar Matriculas"
							action="verAlumnoMatriculaListado?faces-redirect=true" />
						<span class="ui-separator"> <span
							class="ui-icon ui-icon-grip-dotted-vertical" />
						</span>

						<p:commandButton value="#{etqAlm['etiquetas.volverLista']}"
							action="verAlumnoLista.xhtml" />
					</f:facet>
				</p:toolbar>
			
				<p:panelGrid columns="4">

					<p:outputLabel for="etiquetaNumExpediente"
						value="#{etqAlm['etiquetas.numExpediente']}" />
					<p:inputText id="etiquetaNumExpediente"
						value="#{alumnoBean.alumno.numExpediente}" disabled="true" />

					<p:outputLabel for="etiquetaSexo"
						value="#{etqAlm['etiquetas.sexo']}" />
					<p:selectOneRadio id="etiquetaSexo"
						value="#{alumnoBean.alumno.sexo}" layout="lineDirection">
						<f:selectItem itemLabel="#{etqAlm['etiquetas.masculino']}"
							itemValue="h" />
						<f:selectItem itemLabel="#{etqAlm['etiquetas.femenino']}"
							itemValue="m" />
					</p:selectOneRadio>

					<p:outputLabel for="etiquetaNombre"
						value="#{etqAlm['etiquetas.nombre']}" />
					<p:inputText id="etiquetaNombre"
						value="#{alumnoBean.alumno.nombre}" />

					<p:outputLabel value="#{etqAlm['etiquetas.fechaNacimiento']}" />
					<p:calendar value="#{alumnoBean.alumno.fechaNacimiento}" />

					<p:outputLabel for="etiquetaApellido1"
						value="#{etqAlm['etiquetas.apellido1']}" />
					<p:inputText id="etiquetaApellido1"
						value="#{alumnoBean.alumno.apellido1}" />

					<p:outputLabel value="#{etqAlm['etiquetas.paisNacimiento']}" />
					<p:selectOneMenu value="#{alumnoBean.territorioPais.codigo}">
						<f:selectItem itemLabel="#{etqAlm['etiquetas.paisNacimiento']}"
							itemValue="" />
						<f:selectItems value="#{combosAlumnoBean.paisItem}" />
					</p:selectOneMenu>

					<p:outputLabel for="etiquetaApellido2"
						value="#{etqAlm['etiquetas.apellido2']}" />
					<p:inputText id="etiquetaApellido2"
						value="#{alumnoBean.alumno.apellido2}" />

					<p:outputLabel value="#{etqAlm['etiquetas.provinciaNacimiento']}" />
					<p:selectOneMenu value="#{alumnoBean.territorioProvincia.codigo}">
						<f:selectItem itemValue="#{alumnoBean.territorioProvincia.codigo}" />
						<f:selectItems value="#{combosAlumnoBean.provinciaItem}" />
					</p:selectOneMenu>

					<p:outputLabel for="etiquetaTipoDocumento"
						value="#{etqAlm['etiquetas.tipoDocumento']}" />
					<p:selectOneRadio id="etiquetaTipoDocumento"
						value="#{alumnoBean.alumno.tipoDocumento}" layout="lineDirection">
						<f:selectItem itemLabel="#{etqAlm['etiquetas.dni']}"
							itemValue="dni" />
						<f:selectItem itemLabel="#{etqAlm['etiquetas.nif']}"
							itemValue="nif" />
						<f:selectItem itemLabel="#{etqAlm['etiquetas.pasaporte']}"
							itemValue="pasaporte" />
					</p:selectOneRadio>

					<p:outputLabel for="etiquetaDocumento"
						value="#{etqAlm['etiquetas.documento']}" />
					<p:inputText id="etiquetaDocumento"
						value="#{alumnoBean.alumno.documento}" />

					<p:outputLabel for="etiquetaLocalidadNacimiento"
						value="#{etqAlm['etiquetas.localidadNacimiento']}" />
					<p:inputText id="etiquetaLocalidadNacimiento"
						value="#{alumnoBean.alumno.localidadNacimiento}" />

					<p:outputLabel for="etiquetaImagen"
						value="#{etqAlm['etiquetas.imagen']}" />
					<p:inputText id="etiquetaImagen"
						value="#{alumnoBean.alumno.imagen}" />

					
				</p:panelGrid>
			</h:form>
			<h:form>
			<p:dataTable id="tablaDeDirecciones" var="direcciones"
					value="#{alumnoBean.direccionLista}" widgetVar="tablaDeDirecciones"
					emptyMessage="No hay direcciones con este criterio de filtrado"
					filteredValue="#{alumnoBean.direccionFiltro}" paginator="true"
					rows="5" rowsPerPageTemplate="5,10,15">

					<f:facet name="header">
						<p:outputPanel>
							<div class="ui-grid">
								<div class="ui-grid-row">
									<div class="ui-grid-col-6">
										<h1>Direcciones</h1>
									</div>
									<div class="ui-grid-col-6">
										Buscar en todo
										<p:inputText id="globalFilter"
											onkeyup="PF('tablaDeDirecciones').filter()" style="width:150px" />
									</div>
								</div>
							</div>
						</p:outputPanel>
					</f:facet>

					<p:column id="dirCol"
						headerText="#{etqAlm['etiquetas.domicilio']}">
						<h:outputText value="#{direcciones.domicilio}" />
					</p:column>

					<p:column id="cpCol" filterBy="#{direcciones.codigoPostal}"
						headerText="#{etqAlm['etiquetas.codigoPostal']}"
						filterMatchMode="startsWith">
						<h:outputText value="#{direcciones.codigoPostal}" />
					</p:column>

					<p:column id="locCol" filterBy="#{direcciones.localidad}"
						headerText="#{etqAlm['etiquetas.localidad']}"
						filterMatchMode="startsWith">
						<h:outputText value="#{direcciones.localidad}" />
					</p:column>

					<p:column id="te1Col" filterBy="#{direcciones.territorio1.descripcion}" 
						headerText="#{etqAlm['etiquetas.provincia']}" filterMatchMode="startsWith">
						<h:outputText value="#{direcciones.territorio1.descripcion}" />
					</p:column>

					<p:column style="text-align: center" id="sexCol"
						filterBy="#{direcciones.territorio2.descripcion}" headerText="#{etqAlm['etiquetas.pais']}"
						filterMatchMode="startsWith">
						<h:outputText value="#{direcciones.territorio2.descripcion}" />
					</p:column>

					<p:column id="te2Col"
						headerText="#{etqAlm['etiquetas.fechaNacimiento']}">
						<h:outputText value="#{direcciones.principal}" />
					</p:column>

					<p:column style="text-align: center" headerText="Detalle">
						<p:commandButton
							action="#{alumnoBean.getDetalleAlumno(alumnoBean.alumnoSeleccionado.numExpediente)}"
							icon="ui-icon-person" title="View">
							<f:setPropertyActionListener value="#{alumno}"
								target="#{alumnoBean.alumnoSeleccionado}" />
						</p:commandButton>
					</p:column>

				</p:dataTable>
				</h:form>
				
			
			<h:form>
				
				<p:dataTable id="tablaAlumnosContacto" var="alumnoContacto"
					value="#{alumnoBean.alumnoContactoLista}">
					
					<f:facet name="header">Contactos</f:facet>
					<p:column headerText="tipo">
					
								<h:outputText value="#{alumnoContacto.tipo}" />
							
					</p:column>

					<p:column headerText="contacto">
						
								<h:outputText value="#{alumnoContacto.contacto}"/>
							
					</p:column>

					<p:column headerText="expediente">
						<h:outputText value="#{alumnoContacto.alumno.numExpediente}"  />
					</p:column>

					<p:column headerText="principal">
						
								<h:outputText value="#{alumnoContacto.principal}" />
							
					</p:column>


				</p:dataTable>
				
				
			</h:form>

				<h:form>
				<p:commandButton value="Insertar Contacto"
					action="insertarAlumnoContacto" />
				<p:commandButton value="Modificar Contacto"
					action="actualizarAlumnoContacto" />
			</h:form>
				
				
				
				
		</ui:define>

	</ui:composition>

</h:body>

</html>

